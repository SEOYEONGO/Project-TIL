### 웹사이트는 어떻게 생겼을까?<br><br>
웹사이트란, 웹서버 애플리케이션이 공개하는 다양한 웹페이지의 집합이다. 웹사이트를 만들려면 웹서버에 웹서버 애플리케이션을 설치하고, 공개할 웹페이지를 결정할 필요가 있다. 웹페이지는 일반적으로 HTML 파일로 만든다.

#### 웹사이트를 본다는 것은? 
'웹사이트를 본다'는 것은 웹사이트를 구성하는 웹페이지의 파일을 웹서버 애플리케이션에서 웹브라우저로 전송하여 표시하는 것임.
1. 웹브라우저에서 웹사이트 주소를 입력하거나 링크를 클릭하면, 웹서버 애플리케이션에 파일 전송 요청을 보냄.
2. 웹서버 애플리케이션은 요청받은 파일을 응답으로서 돌려보냄.
3. 웹브라우저에서 수신한 파일을 표시하면, 웹사이트를 볼 수 있게 된다.


---



### 웹페이지를 만든다<br><br>
#### 웹페이지는 HTML 파일로 만들어진다.<br>
Hyper Text Markup Language.<br>
'하이퍼텍스트'란 복수의 문서를 연결해 서로 참조할 수 있는 문서!<br>
마크업 언어란 문서의 구조를 명확히 표현하기 위한 언어. 문서의 제목이나 헤드라인, 단락, 리스트, 다른 문서 인용 등의 구조를 명확히 함으로써, 컴퓨터로 문장 구조 분석을 간편하게 할 수 있다.<br>

+) 마크업 : 시작 태그와 종료 태그로 요소를 감싸는 것! <title></title>

---


### 웹사이트의 주소
웹사이트는 HTML 파일로 작성한 웹페이지의 집합임. 그리고 웹사이트를 볼 때는 웹페이지의 HTML 파일을 다운로드해서 웹브라우저로 표시한다. 웹사이트를 보기 위해서는 도대체 어느 웹페이지 파일을 보고 싶은지 지정해야만 함. <br>
전송받고 싶은 웹페이지를 지정하는 것이 웹사이트의 주소임!

#### URL의 의미.<br>
웹사이트 주소는 주로 'http://'로 시작되는 문자열로, URL(Uniform Resource Locator)이라고 불린다. (정식으로는 URI(Uniform Resource Identifier)이지만, URL라는 표현이 보다 널리 쓰임).<br><br>

URL은 'http://www.n-study.com/network/index.html'처럼 기술.  -> <스킴>://<호스트명>/<경로명><br>
* 맨 앞의 http는 **스킴**이라고 해서, 웹브라우저가 웹서버의 데이터에 접속하기 위한 프로토콜을 나타냄. 보통은 http이지만, https나 ftp 등을 이용하기도 함. <br>
* 콜론(:) 뒤에는 파일이 있는 장소를 나타내고, //는 그 뒤로 이어지는 부분이 호스트명임을 나타낸다. 웹서버에 접속할 때는 호스트명에서 IP주소로 변환하는 DNS의 이름해석이 필요하다.<br>
* 호스트명 뒤에는 포트 번호가 이어지지만, 대부분 생략. 생략한 경우에는 지정된 스킴에서 프로토콜의 웰노운 포트를 사용함. 호스트명 뒷부분이 웹서버 어디에 목적으로 하는 파일이 있는지 나타내는 경로임.<br>
* 위의 URL은 'www.n-study.com'이라는 웹서버가 인터넷에 공개한 디렉터리 'network'안에 있는 'index.html'이라는 파일을 'HTTP'로 전송하도록 요청함.<br><br>

---



### 웹사이트의 파일을 요청한다<br><br>
#### HTML 파일 전송<br>
웹사이트를 구성하는 HTML 파일을 전송하기 위해 HTTP(Hyper Text Transfer Protocol)를 이용한다. (하이퍼텍스트를 전송하는 프로토콜).<br>
단, HTTP는 HTML 파일 뿐만 아니라, 다양한 종류의 파일을 전송하는 범용적인 프로토콜로도 이용 가능.<br>
**HTTP 파일 전송은 HTTP 리퀘스트(요청)와 HTTP 리스폰스(응답)를 주고 받으면서 이루어짐.** HTTP는 트랜스포트층의 프로토콜로서 TCP를 이용하므로, HTTP 통신을 하기 전에 TCP 커넥션을 맺는다. <br><br>

#### HTTP 리퀘스트
웹브라우저에서 웹서버 애플리케이션으로 보내는 HTTP 리퀘스트는 리퀘스트 라인, 메시지 헤더, 엔티티 바디의 세 부분으로 나뉘는데, 메시지 헤더와 엔티티 바디의 사이에는 공백 라인이 있다.
**리퀘스트 라인**은 HTTP 리퀘스트의 첫번째 줄로, 웹서버에 대한 실제 처리 요청을 전달한다. 리퀘스트 라인은 다시 메소드, URI, 버전으로 구성된다. 메소드는 서버에 대한 요청을 나타낸다.<br><br>

*주요 HTTP 메소드
* GET : URI로 지정한 데이터를 가져옴.
* HEAD : URI로 지정한 데이터의 헤더만 가져옴.
* POST : 서버에 데이터를 보냄.
* PUT : 서버에 파일을 보냄.
* DELETE : 서버의 파일을 삭제하도록 요청.
* CONNECT : 프록시 서버를 경유해 통신함.

가장 자주 사용되는 메소드는 GET이다. 웹브라우저에서 URL을 입력하거나 링크를 클릭하거나 하면 GET 메소드의 HTTP 리퀘스트를 웹서버 애플리케이션으로 보내게 된다. 

**메시지 헤더**는 요청 라인에 이어지는 여러 줄의 텍스트이다. 여기에는 웹브라우저의 종류와 버전, 대응하는 데이터 형식 등의 정보를 기술한다.
메시지 헤더 다음은 공백 라인으로 구분하고, 그 뒤로 엔티티 바디가 이어진다. **엔티티 바디**는 POST 메소드로 웹브라우저에서 데이터를 보낼 때 사용된다.

---



### 웹사이트의 파일을 전송한다<br><br>

#### 응답으로 돌아오는 HTTP 리스폰스
HTTP 리퀘스트에 대한 응답으로 **HTTP 리스폰스**를 반환한다. HTTP 리스폰스는 HTTP 리퀘스트와 비슷하게 리스폰스 라인, 메시지 헤더, 엔티티 바디로 구성된다.
리스폰스 라인은 다시 버전, 상태 코드, 설명문으로 나뉜다. **버전**은 리퀘스트와 마찬가지로 HTTP의 버전을 나타내며, 현재 주요 버전은 1.0이나 1.1이다. **상태 코드**는 리퀘스트에 대한 웹서버 애플리케이션의 처리 결과를 나타내는 3자리로 된 숫자이다. 상태코드에는 많은 종류가 있고, 표처럼 맨 앞자리에서 대략적인 의미가 정해진다.<br><br>

*주요 HTTP 상태 코드
* 1xx : 정보. 추가 정보가 있음을 전달.
* 2xx : 성공. 서버가 요청을 처리했음을 전달.
* 3xx : 리다이렉트. 다른 URI로 다시 리퀘스트하도록 요청한다.
* 4xx : 클라이언트 에러. 요청에 문제가 있어 처리할 수 없음을 전달.
* 5xx : 서버 에러. 서버 쪽에 문제가 있어 처리할 수 없음을 전달.<br>


**설명문**이란 상태 코드의 의미를 간단히 보여주는 텍스트. 웹서버 애플리케이션이 반환하는 상태 코드에서 가장 많은 것은 '200'이다. 상태 코드 200은 요청을 정상적으로 처리됏음을 나타냄. 하지만, 요청이 정상적으로 처리되면 웹브라우저는 요청한 내용이 표시되므로, 상태 코드 200 자체를 사용자가 보게 되는 경우는 거의 없다.

>웹브라우저 사용자라면 누구나 한 번 쯤 본 적 있는 상태 코드는 아마도 '404'일 것임. URL을 잘못 입력하거나 웹페이지가 삭제되거나 하면, 웹서버는 상태 코드 404를 반환함. 상태 코드 404를 받으면 웹브라우저에서는 '페이지를 찾을 수 없습니다.'와 같은 메시지를 보여준다.
<br>
메시지 헤더는 웹서버 애플리케이션이 더 자세한 정보를 웹브라우저에 전달하기 위해 이용한다. 예를 들어, 데이터 형식이나 갱신 날짜 등이 기술된다.
그 뒤로 구분을 위한 공백 라인이 있고, 공백 라인 뒤에 엔티티 바디가 이어진다. 엔티티 바디에는 웹브라우저에 돌려보낼 데이터가 들어간다. 웹브라우저에 돌려보내는 데이터는 주로 HTML 파일임.


---



### 웹사이트 접속 기록을 기억해 둔다<br><br>
#### 웹페이지의 내용을 커스터마이징하고 싶다<br>
상황에 따라 웹페이지의 내용을 커스터마이징하고 싶을 때에는 HTTP 쿠키(Cookie)를 이용한다.

#### 특정 정보를 기억해 두는 HTTP 쿠키
**HTTP 쿠키**는 웹서버 애플리케이션이 웹브라우저에 특정 정보를 저장해두는 기술임. 웹서버 애플리케이션은 웹브라우저의 요청에 대한 HTTP 리스폰스에 쿠키를 포함하여 보낸다.(쿠키 정보는 HTTP 헤더에 포함됨).
웹브라우저가 쿠키를 받을 수 있게 설정되어 있으면, 수신한 쿠키를 저장한다. 그 뒤로 같은 웹사이트에 접속할 때는 HTTP 리퀘스트에 쿠키도 함께 포함됨. **쿠키를 이용함으로써, 웹서버는 사용자의 로그인 정보나 사이트 내 웹페이지 열람 이력을 관리할 수 있다.** 접속한 사용자에 맞게 웹페이지 내용을 개인화할 수도 있다.
예를 들어, 쇼핑 사이트에서 추천 상품을 표시하려면, 사용자가 어떤 상품 정보를 찾았을 때, 그 기록을 쿠키로 웹브라우저에 저장해 둔다. 나중에 사용자가 다시 사이트에 접속해오면, 쿠키를 읽어 지난 번에 찾았던 상품과 관련된 정보를 추천할 수 있다.

---



### 프록시 서버 : 웹사이트 접속을 대행한다<br><br>
#### 웹 접속을 대신하는 서버 : 프록시 서버
웹페이지를 열람할 때 웹브라우저와 웹서버 애플리케이션은 서로 통신한다. 이때 그 사이에 **프록시 서버**를 거치는 경우가 있다. 프록시 서버란, 웹사이트 접속을 대행하는 서버이다. 프록시는 영어 proxy의 발음을 그대로 표기한 것으로, '대리'라는 의미이다.

서버를 프록시 서버로 동작시키려면, 서버에서 프록시 서버 애플리케이션을 실행해야 한다. 또 이 프록시 서버를 이용하기 위해서는, 웹브라우저에서 프록시 서버 설정을 할 필요가 있다.

    *프록시 서버를 경우하는 웹 접속의 경우...
      1. 클라이언트 PC의 웹브라우저에서 URL을 입력하면, 프록시 서버로 HTTP 리퀘스트를 보낸다.
      2. 프록시 서버에서 URL로 지정된 웹서버에 HTTP 리퀘스트를 보낸다.
      3. 웹서버에서 프록시 서버로 HTTP 리스폰스를 보낸다.
      4. 프록시 서버에서 클라이언트 PC의 웹브라우저로 HTTP 리스폰스를 보낸다.

**클라이언트 PC의 웹브라우저에서 프록시 서버에 접속할 때에는 TCP 포트 번호 8080을 사용하는 경우가 많다.**<br><br>


*point
* 프록시 서버는 웹 접속을 대신하는 서버이다.
* 웹 서버에서 보면 접속하는 것은 프록시 서버이고, 원래 클라이언트는 알 수 없게 된다.


---


### 프록시 서버의 목적 : 직원이 보는 웹사이트를 확인한다.<br><br>
#### 관리자 입장에서 보는 프록시 서버의 목적<br>
**1. 클라이언트의 웹브라우저에서 접속하는 웹사이트를 확인한다.**<br>
관리자가 프록시 서버를 이용하는 목적 중 하나는 클라이언트 PC의 웹브라우저에서 어떤 웹사이트에 접속하는지 확인하는 것이다.
프록시 서버로 각 클라이언트 PC의 웹브라우저에서 어떤 URL의 웹사이트에 접속하는지 모두 알 수 있다. 직원이 업무에 관계없는 웹사이트에 접속하는지 확인할 수 있다.<br>

**2. 부정한 웹사이트에 접속할 수 없게 한다.**<br>
프록시 서버를 이용하면 부정한 웹사이트에 접속할 수 없게 제한할 수 있다. 웹사이트에 대한 접속 제한을 **URL필터링** 또는 **웹필터링**이라고 부른다.


---


### 웹 애플리케이션 : 웹브라우저는 웹서핑만 하는 게 아니다<br><br>
#### 웹브라우저만 있으면 된다.<br><br>
웹브라우저를 유저 인터페이스로 이용하는 애플리케이션을 **웹 애플리케이션**이라고 한다.<br>

    1. 웹브라우저로 처리할 데이터를 입력
    2. 웹브라우저에서 웹서버 애플리케이션에게 데이터 처리 요청을 전송!
    3. 웹서버 애플리케이션에서는..그 아래 웹서버(정적 컨텐츠 발행)에게 시켜서, 애플리케이션 서버/데이터베이스 서버에 데이터 처리를 요청해.
    4. 애플리케이션 서버와 데이터베이스 서버가 연계해 요청받은 처리를 한 후, 그 둘이 힘을 합쳐 웹서버에게 데이터 처리 결과를 돌려 보낸다.
    5. 웹서버는 웹브라우저에게 데이터 처리 결과를 표시하는 웹페이지를 작성해서 돌려보낸다.
    
*point
* 웹 애플리케이션은 웹브라우저를 유저 인터페이스로 이용하는 애플리케이션이다.
* 클라이언트 PC 전용 애플리케이션 설치나 업데이트 등이 필요없어진다.


---



### 웹 접속 시의 애플리케이션과 프로토콜 : 웹사이트를 볼 때의 준비<br><br>
#### 이용하는 애플리케이션<br>
웹사이트에 접속하기 위해 이용하는 애플리케이션이 바로 웹브라우저이다. (Google Chrome, Microsoft Edge/Internet Explorer, Mozlia Firefox, Apple Safari가 있다.)
웹브라우저는 대개 특별한 설정을 할 필요가 없다. **단, 프록시 서버를 이용할 때는 프록시 서버의 IP 주소와 포트 번호를 설정한다.** 또한, 웹서버에는 **웹서버 애플리케이션**이 필요하다.
주요 웹서버 애플리케이션으로는 'Apache'나 'Microsoft IIS'가 있다. 웹서버 애플리케이션에는 공개할 웹사이트의 파일을 저장한 장소(디렉터리) 등을 설정할 필요가 있다.<br><br>

#### 이용하는 프로토콜<br>
웹 접속에 이용하는 프로토콜은 HTTP이다. 또한, 트랜스포트층에는 TCP를, 인터넷층에는 IP를 이용한다. HTTP의 웰노운 포트는 80이고, 네트워크 인터페이스층은 대부분 이더넷을 이용한다.

웹사이트에 접속할 때는 웹사이트 주소인 URL을 이용한다. 그 URL로부터 웹서버의 IP 주소를 구하는 이름해석을 하기 위해서는 DNS가 필요하다. **DNS와 ARP는 자동으로 실행되므로 사용자가 그다지 의식할 일은 없지만, 매우 중요한 프로토콜이다**

(ARP는 IP주소를 MAC 주소로 바꾸는 역할을 한다.)<br><br>

*point
* 웹 접속의 대전제는 TCP/IP 설정이 바르게 되어 있는 것이다.
* 이용하는 애플리케이션은 웹브라우저와 웹서버 애플리케이션이다.
* 이용하는 프로토콜은 HTTP/TCP/IP의 조합이다. 그밖에도 DNS와 ARP가 필요하다.

---


### 웹사이트를 보는 흐름 (DNS 이름해석, HTTP 리퀘스트와 HTTP 리스폰스)<br><br>
#### 웹사이트를 볼 때의 동작 <br>
웹사이트를 보기 위해서 **HTTP 리퀘스트**와 **HTTP 리스폰스**를 주고 받지만, 그 전에 **DNS의 이름해석**과 **ARP의 주소해석** 기능도 동작한다. 그리고 TCP로 커넥션도 맺는다. 간단한 네트워크 구성을 예로 DNS와 ARP, TCP도 포함해 웹사이트를 볼 때의 흐름을 생각해보자.

    1. 웹사이트를 볼 때는 웹브라우저에서 URL를 입력한다. 또는 웹페이지의 링크를 클릭한다.
    2. TCP/IP는 반드시 IP주소를 지정해야만 한다. URL에 포함된 웹서버의 호스명을 DNS 서버에 질의해 웹서버의 IP 주소를 해석한다. 
                              (DNS 서버에 질의할 떄는 이더넷의 MAC 주소를 구하기 위해 ARP도 실행된다. 라우터가 DNS 서버 기능을 가진다고 가정.)
    3. 웹서버의 IP 주소를 알면, 그 IP 주소를 지정하여 웹브라우저와 웹서버 애플리케이션 간에 TCP 커넥션을 맺는다.
    4. 웹브라우저와 웹서버 애플리케이션 간의 TCP 커넥션을 확립하고 나서부터, HTTP 리퀘스트와 HTTP 리스폰스를 주고 받는다. 
                              (웹브라우저에서 지정한 URL을 포함한 HTTP 리퀘스트 (GET 메소드)가 웹서버 애플리케이션에 전송된다.)
    5. HTTP 리퀘스트를 받은 웹서버 애플리케이션은 요청된 웹페이지의 파일을 HTTP 리스폰스로 반환한다. 
       TCP에서 복수로 분할된 웹페이지의 파일을 조립하여 웹브라우저에 그 내용을 표시하면, 사용자는 웹사이트를 볼 수 있게 된다.
    
*point
* 웹사이트를 볼 때는 DNS의 이름해석과 ARP의 주소해석 기능이 동작한다.
* 웹사이트를 볼 때의 흐름
1. 웹브라우저에서 URL을 입력
2. 웹서버의 IP 주소를 해석
3. TCP 커넥션 확립
4. HTTP 리퀘스트 전송과 HTTP 리스폰스 전송
